<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Шины</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
    <script src="../static/js/jquery-3.2.1.min.js" th:src="@{/js/jquery-3.2.1.min.js}"></script>
    <script src="../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <form id="excel_form" enctype="multipart/form-data" method="post">
            <div class="col-md-offset-3 col-md-6" style="text-align: center">
                <h3>Загрузка информации в базу данных:</h3>
                <div class="form-inline col-xs-6" style="padding: 8px 0">
                    <input id="excel_file" type="file" name="excelFile" onchange="check_extension(this.value);"/>
                </div>
                <div class="form-inline col-xs-6 text-right">
                    <button id="upload" type="submit" class="btn btn-primary" disabled="disabled">Отправить</button>
                </div>
            </div>
        </form>
    </div>
    <div class="row">
        <div th:if="${not #lists.isEmpty(tires)}" style="padding: 30px;">
            <table class="table table-responsive table-hover">
                <thead>
                <tr class="active">
                    <th>Id</th>
                    <th>Бренд</th>
                    <th>Модель</th>
                    <th>Тип</th>
                    <th>Ширина</th>
                    <th>Высота</th>
                    <th>Диаметр</th>
                    <th>Сезон</th>
                    <th>Индекс нагрузки</th>
                    <th>Индекс скорости</th>
                    <th>Усиленная</th>
                    <th>Шип/нешип</th>
                    <th>Доп. параметры</th>
                    <th>Страна</th>
                    <th>Год</th>
                    <th>Остаток</th>
                    <th>Цена</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="item : ${tires}">
                    <td th:text="${item.id}"></td>
                    <td th:text="${item.brandName}"></td>
                    <td th:text="${item.modelName}"></td>
                    <td th:text="${item.tireType}"></td>
                    <td th:text="${item.width}"></td>
                    <td th:text="${item.height}"></td>
                    <td th:text="${item.diameter}"></td>
                    <td th:text="${item.season}"></td>
                    <td th:text="${item.loadIndex}"></td>
                    <td th:text="${item.speedIndex}"></td>
                    <td th:text="${item.reinforced}"></td>
                    <td th:text="${item.spikeNonShip}"></td>
                    <td th:text="${item.extrasOptions}"></td>
                    <td th:text="${item.country}"></td>
                    <td th:text="${item.year}"></td>
                    <td th:text="${item.balance}"></td>
                    <td th:text="${item.price}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
function check_extension(filename) {
    var re = /\..+$/;
    var ext = filename.match(re);
    var submitEl = document.getElementById("upload");
    if (ext == '.xls') {
        submitEl.disabled = false;
        return true;
    } else {
        alert("Неправильный тип файла, выберите другой файл");
        submitEl.disabled = true;
        return false;
    }
}
</script>
</html>